<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <!-- META TAGS -->
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <!-- CSS STYLES -->
    <!-- Individual YUI CSS files --> 
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.6.0/build/base/base-min.css"> 
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.6.0/build/assets/skins/sam/skin.css"> 
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.6.0/build/assets/skins/sam/autocomplete.css"> 
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.6.0/build/tabview/assets/skins/sam/tabview.css">

    <!-- LL Urban Achiever Styles -->
    <link rel="stylesheet" type="text/css" href="css/yui-maxi.css"> 
    <style type="text/css">
    </style>
    <!-- END STYLES -->

    <!-- JAVASCRIPT -->
    <!-- Individual YUI JS files --> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/yahoo-dom-event/yahoo-dom-event.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/connection/connection-min.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/get/get.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/datasource/datasource-min.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/autocomplete/autocomplete.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/element/element-beta-debug.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/button/button-min.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/json/json-min.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/charts/charts-experimental-min.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/dragdrop/dragdrop-min.js"></script> 
    <script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/datatable/datatable-min.js"></script> 
	<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/tabview/tabview-debug.js"></script> 
	<script type="text/javascript" src="http://yui.yahooapis.com/2.5.1/build/json/json-min.js"></script> 
	 
    <!-- LL Urban Achiever JavaScript -->
    <script src="scripts/awsSearch.js"></script> 	 
    <script src="scripts/technoratiSearch.js"></script> 
    <script src="scripts/movieLensSearch.js"></script> 
    <script src="scripts/boxofficeSearch.js"></script> 
    <script src="scripts/boxofficeDisplay.js"></script> 
    <script src="scripts/display.js"></script> 	 
    <script src="scripts/dragDrop.js"></script> 	 
    <script type="text/javascript">
  	//Global variables for each of three movies we may be dealing with
  	var searchMovie = {};
  	var leftMovie = {};
  	var rightMovie = {};
  	YAHOO.widget.Chart.SWFURL = "http://yui.yahooapis.com/2.6.0/build//charts/assets/charts.swf";
  	
  	function runSearch(termField) {
  	    var tempMovie = {};
	 	tempMovie.fullTitle = document.getElementById(termField).value;
        var tempTitle = tempMovie.fullTitle;

        // truncate title to exclude string after "(", ",", or ":"
        var index = tempTitle.search(/\u0028/);
        if( index > -1 )
            tempTitle = tempTitle.substring(0, index);
        index = tempTitle.search(",");
        if( index > -1 )
            tempTitle = tempTitle.substring(0, index);
        index = tempTitle.search(":");
        if( index > -1 )
            tempTitle = tempTitle.substring(0, index);

        tempMovie.title = tempTitle;

        // make requests for data from our data sources
     	requestAwsData(tempMovie);
     	requestTechnoratiData(tempMovie);
     	requestMovieLensData(tempMovie);
        get_trynt_data(tempMovie, function() {
            get_box_office_data(tempMovie, function() {
            });
        });
        searchMovie = tempMovie;
	  }
	  
	  function sendMovieLeft(){
	    if(searchMovie.awsData === undefined){
	    }
	    else{
	   	 	leftMovie = searchMovie;
        	resetSearch();
	   	 	displayLeftSide(leftMovie);
	    }
	  }
	  function sendMovieRight(){
	    if(searchMovie.awsData === undefined){
	    }
	    else{
	    	rightMovie = searchMovie;
        	resetSearch();
	    	displayRightSide(rightMovie);
	    }
	  }

      function resetSearch()
      {
          searchMovie = {};
          var poster = YAHOO.util.Dom.get("posterImage");
          var searchField = YAHOO.util.Dom.get("searchMovieTitle");

          poster.src = "images/noResult.jpg";
          poster.alt = "No result available";
          searchField.value = "";
      }

      function setACCoordinates()
      {
          var x = YAHOO.util.Dom.getX("searchMovieTitle");
          YAHOO.util.Dom.setX("searchContainer", x);
      }
	  
    </script>
    <!-- END JS -->

    <title>Achievers @ the Movies</title>
</head>

<body class="yui-skin-sam" onload="setACCoordinates();">
<div id="mainContent">
    <div id="headerImage">
        <img src="images/achievers_header.jpg" width="950" height="269" alt="Achievers @ The Movies" />
    </div>
    
    <div id="searchArea"> 
        <div id="searchBox">
            <form action="#" onsubmit="runSearch('searchMovieTitle'); return false;">
            <div id="searchAutoComplete">
                <b>Search:</b>
                <input id="searchMovieTitle" type="text"/><input id="searchButton" type="submit" value="Get Movie" />
                <div id="searchContainer"></div>
            </div>
            </form>
            <script type="text/javascript" src="scripts/search.js"></script>
            <!-- TEST BUTTONS -->
            <input id="sendLeft" type="submit" value="Send Left" onclick="sendMovieLeft()" />
            <input id="sendRight" type="submit" value="Send Right" onsubmit="sendMovieRight()" />
            <!-- -->
        </div>
        <div id="posterImageArea">
            <img id="posterImage" src="images/noResult.jpg" alt="No result available" />
        </div>
    </div>

    <div id="dragArea">
        <div id="dragDropArea1">
            <img id="drag1" src="images/dragArea.png" alt="Drag and drop poster image here" />
        </div>

        <div id="dragVersus">
            <img id="vs" src="images/vs.png" alt="versus" />
        </div>

        <div id="dragDropArea2">
            <img id="drag2" src="images/dragArea.png" alt="drag and drop poster image here" />
        </div>
    </div>

    <div id="copyright">
        <br />
        <br />
        Copyright &copy; 2009 The Little Lebowski Urban Achievers
    </div>
</div>
</body>
</html>

